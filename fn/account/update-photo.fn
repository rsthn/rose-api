
(import "lib/common")
(import "lib/utils")

(sentinel:auth-required)

(shield:validate input
    (shield:field photo
        required true
        file-type:unsupported_image png,jpg,jpeg
        max-file-size:16m 16777216
    )
)

(utils:update-photo (input.photo) "user_id" (session.user.user_id) "users" "photo" 512 512)

{
    data (common:get-user-details true)
}
